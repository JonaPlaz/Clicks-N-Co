{% extends 'base.html.twig' %}

{% block title %}
	Commandes de {{ shop.name }}
{% endblock %}

{% block body %}
    <a href="{{ path('user_backoffice_shop_read', {'name_slug': shop.nameslug}) }}">Retour</a>
	<h1>Commandes de {{ shop.name }}</h1>

	<table class="table table-hover">
			{% for order in orders %}
      	<thead>
			<tr>
				<th scope="col">Référence</th>
				<th scope="col">Date</th>
        <th scope="col">Client</th>
        	<th scope="col">Prix Total</th>
				<th scope="col">Statut</th>
			</tr>
		</thead>
		<tbody>
				<tr>
					<td>{{ order.id }}</td>
					<td>{{ order.createdAt|date('d-m-Y') }}</td>
					<td>{{ user.firstname }} {{ user.lastname }}</td>
          <td>{{ order.totalprice }}</td>
					<td>{% if order.status == 0 %}
              A préparer
            {% elseif order.status == 1 %}
                En cours
                {% elseif order.status == 2 %}
                Prête
              {% else %}
                Refusée
              {% endif %}
            </td>
				</tr>
        <tr>
				<th scope="col">Réf Ligne</th>
				<th scope="col">Produit</th>
        <th scope="col">Quantité</th>
				<th scope="col">Prix</th>
			</tr>
        	{% for orderline in order.orderlines %}
				<tr>
					<td>{{ orderline.id }}</td>
          <td>{{ orderline.product.name }}</td>
					<td>{{ orderline.quantity }}</td>
					<td>{{ orderline.price }}</td>
				</tr>
			{% endfor %}
			{% endfor %}
		</tbody>
	</table>
{% endblock %}
